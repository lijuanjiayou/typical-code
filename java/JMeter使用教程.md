## 一、Jmeter:概述

#### A：是什么？

Jmeter是Apache公司使用Java开发的一款测试工具

#### B：为什么？

高效，功能强大

模拟一些高并发或多次循环等特殊测试场景

例如：

1. 对票务网接口-查询，执行100次，如何去做？

2. 50个用户同时请求如何操作？

#### C：怎么用？

1）下载Jmeter,解压缩

2）安装Java环境（Jmeter和Java环境的关系，类似于mp3文件和播放器的关系）

3）简单了解Jmeter的目录结构

​        bin：可执行程序（ApacheJMeter.jar是启动程序）

​        lib：存储了Jmeter整合的功能（一些.jar文件的小程序）

4）启动Jmeter

​        启动方式1：bin/ApacheJMeter.jar 双击

​        启动方式2：jmeter.bat---windows下的启动程序

​                             jmeter.sh---Linux下的启动程序

5）编写一个Jmeter版本的测试案例

#### D：Jmeter的作用，优点以及缺点（了解）

作用：
```
1. 接口测试  
2. 性能测试：内在---程序的算法不同，导致的性能不同，如响应时间不同
3. 压力测试：外在---外在负载，如12306并发用户数10000个
4. Web自动化测试  
5. 数据库测试：测试数据库，查询
6. JAVA程序测试：Jmeter本身就是Java开发的，开发初衷就是测试Java程序
```

优点：

```
1. 开源，免费
2. 支持多协议：http https ftp(电影下载等) ftps...
3. 小巧：47.7MB
4. 功能强大
```

缺点：

```
1. 不支持IP欺骗
（如天气预报限制访问次数，超过访问次数后收费，可利用IP欺骗使用假的IP地址不断访问，Jmeter不可以使用多个假的IP)
2. Jmeter无法验证JS程序，也无法验证页面UI，所以要须要和Selenium配合来完成 Web2.0应用的测试）
```

## 二、Jmeter组件：线程组

#### A. 是什么？

-------------------------

进程：一个正在执行的程序对应一个进程 

线程：进程中的执行线索（一个进程有多个执行线索）

线程组：按照线程性质对线程进行分组



并发执行：多个线程同时执行

​                 特点：执行结束的顺序和线程启动顺序不一定一致

顺序执行：按照线程的启动顺序挨个执行



#### B. 为什么？

方便管理



#### C. 怎么用？（基本使用）

1）三者关系：进程有多个线程组，线程组可以有多个线程

​        进程-------测试计划

​         线程组---线程组

​         线程------线程组属性的线程数

2）默认情况下，线程组中的线程是并发执行的

​             每一个线程都要执行组内的http请求

3）怎么设置线程组按顺序执行

勾选测试计划的第一个复选框（独立运行每个线程组）

 4）线程组练习  

学院增删改查

##### 操作步骤：

- 测试计划修改完名字要记得保存
- 线程组：测试计划--->右击--->添加--->Threads(Users)--->线程组
- HTTP请求：线程组--->右击--->添加--->Sampler（取样器）--->HTTP请求
- 察看结果树：测试计划--->右击--->添加--->监听器--->察看结果树
- 信息头管理器：测试计划--->右击--->添加--->配置元件--->http信息头管理器

#### E. 练习：学生管理系统增删改查优化

可以使用http请求默认值抽取共同的IP,端口号，协议，编码集等信息

步骤：测试计划--->右击--->添加--->配置元件--->http请求默认值

作用：通过复用属性简化实现，提高测试效率

F. 线程组高级（初始化与销毁线程组）

1）线程组属性

属性1：线程数-----模拟用户数

属性2：时间值（Ramp-Up Period(in seconds))-----在指定时间内启动所有线程

属性3：循环数-----单个用户访问的次数

2)调度器

1.循环次数设置为---永远

2.设置启动延迟x和持续时间y---在x秒后访问服务器，并且持续y秒

3.设置启动时间M和结束时间N---在M时开始访问，在N时结束

注意：2和3实现不能同时使用，否则矛盾了

## 三、Jmeter组件：参数化概述（了解）

#### 1) 是什么？

参数化就是动态的获取并设置数据

#### 2）为什么？

比如执行批量操作时，批量插入或批量删除，之前数据是手写的，每执行完都需要修改一次，效率太低，参数化就是可以以程序代替人工获取并设置数据：安全+高效

## 四、Jmeter组件：参数化实现之CSV Data Set Config(重点中重点)

#### 1)   是什么？

Jmeter参数化实现组件之一

#### 2）为什么？

通过这个组件可以动态获取并设置数据，实现类似批量添加操作（执行一次，将多条数据插入到数据库）

#### 3）怎么用？

###### 3-1. 实现思想

![](D:\notes\typical_code\typical-code\java\JMeter图片\1.png)

###### 3-2. 实现流程

步骤：

添加CSV: 线程组--->右击--->添加--->配置元件--->CSV Data Set Config



![](D:\notes\typical_code\typical-code\java\JMeter图片\2.png)

#### 4）其他

CSV Data Set Config-----CSV数据配置

CSV----->逗号分隔值文件格式



## 五、Jmeter组件：线程组实现高级

setUp       线程组： 最先执行的线程组

​                                  加载程序主体执行所需的资源

tearDown线程组： 最后执行的线程组

​                                  程序正式关闭之前，可以将数据保存进内存

步骤：测试计划--->右击--->添加--->Threads(Users)--->setUp or tearDown

