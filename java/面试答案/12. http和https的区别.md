### 1. OSI参考模型：

共七层：物理层，数据链路层，网络层，传输层，会话层，表示层，应用层

### 2. TCP/IP协议：

共四层：物理层，互联网层（IP协议），传输层（TCP协议），应用层（http协议） 

### 3. HTTP协议：

属于TCP/IP协议中的一种



IP协议是一个比较底层的协议，是互联网层的协议，他用于表示某一台计算机，他可以通过IP地址准确定位一台计算机。

建立在IP基础之上的是TCP协议，两台计算机要进行连接就需要TCP协议 ，这个协议我们成为传输层的协议。TCP协议可以保证传输的安全性：三次握手：发送连接请求，返回响应，传输数据。

HTTP协议是建立在TCP协议基础之上的，通过TCP协议让两台计算机连上以后就需要建立通话， 对话的通讯格式就需要遵循HTTP协议。

Http协议的版本 

Http1.0 :    建立连接，发送一次请求就断开

Http1.1  ：建立连接，可以无限次发送请求



#### 3.1 http请求消息

IE向服务器发送的内容

内容包括一个请求行、若干消息头、以及实体内容，其中的一些消息头和实体内容都是可选的，消息头和实体内容之间要用空行隔开。

##### 1. 请求行 GET

 /itcast/a.html HTTP/1.1

请求方式共有7种，在实践中发现其中的5种没用，只需要学两种 get post

GET 方式 ： get方式请求参数跟在url后面/itcast/a.html?username=aaa&password=111,数据最多1K

Post方式： 请求参数放在消息体中传输，相对安全，get大小限制1K，post 无数据量限制

 

##### 2. 请求消息头 

 IE浏览器用于向服务器说明情况的(浏览器环境)

Accept: text/html,image/*         说明浏览器接受的数据类型

Accept-Charset: ISO-8859-1       说明浏览器使用的字符编码

Accept-Encoding: gzip,compress    说明浏览器支持的压缩格式

Accept-Language: en-us,zh-cn       说明浏览器的语言环境

Host: www.it315.org:80              说明浏览器要访问的主机名

If-Modified-Since: Tue, 11 Jul 2000 18:23:51 GMT             文件的修改时间，用于做缓存

Referer: http://www.it315.org/index.jsp    说明请求来自哪里，防盗链 (做实验)

User-Agent: Mozilla/4.0 (compatible; MSIE 5.5; Windows NT 5.0) 说明浏览器内核

Cookie                          向服务器发送Cookie

Connection: close/Keep-Alive      说明连接状态

Date: Tue, 11 Jul 2000 18:23:51 GMT    客户端计算机时间



#### 3.2 http相应消息

内容包括一个状态行、若干消息头、以及实体内容，其中的一些消息头和实体内容都是可选的，消息头和实体内容之间要用空行隔开。

##### 1. 状态行

 HTTP/1.1 404 Not Found

协议版本

状态码： 

200(ok) 

302 请求重定向，你访问我，我通知你访问另一个资源  

304 通知浏览器去读缓存  

404 找不到资源  

500 服务器程序出错

503 service unavailable 服务器暂时处于超负载或者正在进行停机维护，现在无法处理请求。

 

##### 2. 响应消息头    

服务器向浏览器说明情况(处理结果)

Location: http://www.it315.org/index.jsp    通知浏览器去访问另一个资源

Server:apache tomcat                说明服务器

Content-Encoding: gzip              通知浏览器数据的压缩格式

Content-Length: 80                  通知浏览器发送数据的长度

Content-Language: zh-cn             通知浏览器语言环境

Content-Type: text/html; charset=GB2312    通知浏览器文件的格式和编码

Last-Modified: Tue, 11 Jul 2000 18:23:51 GMT   告诉浏览器文件的修改时间

Refresh: 1;url=http://www.it315.org     通知浏览器自动刷新

Content-Disposition: attachment; filename=aaa.zip 通知浏览器以下载的方式打开资源

Set-Cookie:SS=Q0=5Lb_nQ; path=/search   发cookie

Expires: -1//3种禁止缓存的头字段       

Cache-Control: no-cache  

Pragma: no-cache    

Connection: close/Keep-Alive         连接状态

Date: Tue, 11 Jul 2000 18:23:51 GMT   系统时间



### 4.  HTTPS:

https 是一种加密协议，能保证数据的安全

http+加密+证书+完整性保护=https

https是身披SSL外壳的http

https采用共享密钥加密和公开密钥加密两者并用的混合加密机制，在交换密钥环节使用混合加密方式，之后的建立通信交换报文阶段则使用共享密钥加密方式。

### 5. HTTP和HTTPS的区别

1、https协议需要到ca申请证书，一般免费证书较少，因而需要一定费用。

2、http是超文本传输协议，信息是明文传输，https则是具有安全性的ssl加密传输协议。

3、http和https使用的是完全不同的连接方式，用的端口也不一样，前者是80，后者是443。

4、http的连接很简单，是无状态的；HTTPS协议是由SSL+HTTP协议构建的可进行**加密传输、身份认证**的网络协议，比http协议安全。

以下是具体一些分析

#### **一、HTTP和HTTPS的基本概念**

**HTTP**：是互联网上应用最为广泛的一种网络协议，是一个客户端和服务器端请求和应答的标准（TCP），用于从WWW服务器传输超文本到本地浏览器的传输协议，它可以使浏览器更加高效，使网络传输减少。

**HTTPS**：是以安全为目标的HTTP通道，简单讲是HTTP的安全版，即HTTP下加入SSL层，HTTPS的安全基础是SSL，因此加密的详细内容就需要SSL。

**HTTPS协议的主要作用可以分为两种**：一种是建立一个信息安全通道，来保证数据传输的安全；另一种就是确认网站的真实性。

#### 二 **、**HTTP和HTTPS的主要特点和工作流程

**HTTP特点**

1.支持客户/服务器模式。（C/S模式）

2.简单快速：客户向服务器请求服务时，只需传送请求方法和路径。请求方法常用的有GET、HEAD、POST。每种方法规定了客户与服务器联系的类型不同。由于HTTP协议简单，使得HTTP服务器的程序规模小，因而通信速度很快。

3.灵活：HTTP允许传输任意类型的数据对象。正在传输的类型由Content-Type加以标记。

4.无连接：无连接的含义是限制每次连接只处理一个请求。服务器处理完客户的请求，并收到客户的应答后，即断开连接。采用这种方式可以节省传输时间。

5.无状态：HTTP协议是**无状态协议**。无状态是指协议对于事务处理没有记忆能力。缺少状态意味着如果后续处理需要前面的信息，则它必须重传，这样可能导致每次连接传送的数据量增大。另一方面，在服务器不需要先前信息时它的应答就较快

**HTTP工作流程**

第一步：建立TCP/IP连接，客户端与服务器通过Socket三次握手进行连接

第二步：客户端向服务端发起HTTP请求（例如：POST/login.html http/1.1）

第三步：客户端发送请求头信息，请求内容，最后会发送一空白行，标示客户端请求完毕

第四步：服务器做出应答，表示对于客户端请求的应答，例如：HTTP/1.1 200 OK

第五步：服务器向客户端发送应答头信息

第六步：服务器向客户端发送请求头信息后，也会发送一空白行，标示应答头信息发送完毕，接着就以Content-type要求的数据格式发送数据给客户端

第七步：服务端关闭TCP连接，如果服务器或者客户端增Connection:keep-alive就表示客户端与服务器端继续保存连接，在下次请求时可以继续使用这次的连接

**HTTPS特点**

HTTPS是HTTP协议的修改，它加密数据并确保其机密性。其配置可保护用户在与网站交互时免于窃取个人信息和计费数据。

1、优点

相比于http，https可以提供更加优质保密的信息，保证了用户数据的安全性，此外https同时也一定程度上保护了服务端，使用恶意攻击和伪装数据的成本大大提高。

2、缺点

缺点也同样很明显，第一https的技术门槛较高，多数个人或者私人网站难以支撑，CA机构颁发的证书都是需要年费的，此外对接Https协议也需要额外的技术支持；其二，目前来说大多数网站并不关心数据的安全性和保密性，其https最大的优点对它来说并不适用；其三，https加重了服务端的负担，相比于http其需要更多的资源来支撑，同时也降低了用户的访问速度；第四，目前来说Http网站仍然大规模使用，在浏览器侧也没有特别大的差别，很多用户不关心的话根本不感知。

**HTTPS工作流程**

![img](https://pics1.baidu.com/feed/023b5bb5c9ea15ce26b853cd9cdca2f73887b284.jpeg?token=5ee5bde0022bc60fbbcfb1fe34e739b7&s=7EAC3C6259DFC0C8485CE0DB0000C0B1)

第一步：客户使用https的URL访问Web服务器，要求与Web服务器建立SSL连接。

第二步：Web服务器收到客户端请求后，会将网站的证书信息（证书中包含公钥）传送一份给客户端。

第三步：客户端的浏览器与Web服务器开始协商SSL连接的安全等级，也就是信息加密的等级。

第四步：客户端的浏览器根据双方同意的安全等级，建立会话密钥，然后利用网站的公钥将会话密钥加密，并传送给网站。

第五步：Web服务器利用自己的私钥解密出会话密钥。

第六步：Web服务器利用会话密钥加密与客户端之间的通信。

最后说一句 ，ssl证书阿里云上可以免费申请一年

